<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ù…Ù‡Ø§Ø±Ø§Øª Ù„ØºØªÙŠ</title>

  <style>
    :root{
      --bg:#f6f7ff;
      --card:#ffffff;
      --ink:#1f2430;
      --muted:#556074;
      --brand:#6b5bd6;
      --brand2:#ff7aa2;
      --ok:#18b86a;
      --bad:#ff355d;
      --shadow: rgba(0,0,0,.12);
      --ring: rgba(107,91,214,.25);
    }

    *{ box-sizing:border-box; }
    body{
      margin:0;
      font-family: "Cairo","Tajawal", system-ui, -apple-system, "Segoe UI", Arial, sans-serif;
      background:
        radial-gradient(1200px 600px at 50% -10%, rgba(107,91,214,.20), transparent 55%),
        radial-gradient(900px 480px at 90% 20%, rgba(255,122,162,.16), transparent 60%),
        var(--bg);
      color:var(--ink);
      padding:18px 12px 28px;
    }

    .wrap{
      width:min(1180px, 96vw);
      margin:0 auto;
    }

    .topbar{
      position: sticky;
      top: 10px;
      z-index: 50;
      background: rgba(255,255,255,.75);
      border: 1px solid rgba(255,255,255,.9);
      backdrop-filter: blur(10px);
      border-radius: 18px;
      padding: 12px;
      box-shadow: 0 10px 26px var(--shadow);
    }

    .topRow{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      flex-wrap:wrap;
    }

    .title{
      margin:0;
      font-weight: 1000;
      font-size: clamp(20px, 2.6vw, 30px);
    }
    .subtitle{
      margin:4px 0 0;
      font-weight: 900;
      color: var(--muted);
      font-size: clamp(13px, 1.8vw, 16px);
    }

    .homeBtn{
      text-decoration:none;
      background: linear-gradient(180deg, var(--brand), #5142c8);
      color:#fff;
      padding: 12px 14px;
      border-radius: 14px;
      font-weight: 1000;
      display:flex;
      align-items:center;
      gap:8px;
      box-shadow: 0 12px 22px rgba(107,91,214,.25);
      white-space:nowrap;
    }

    .chips{
      margin-top: 12px;
      display:flex;
      flex-wrap:wrap;
      gap:10px;
      justify-content:center;
    }

    .chip{
      border:0;
      cursor:pointer;
      padding: 12px 14px;
      border-radius: 999px;
      background: #fff;
      color: #20263a;
      font-weight: 1000;
      box-shadow: 0 8px 18px rgba(0,0,0,.10);
      transition: transform .12s ease, box-shadow .12s ease;
      outline: none;
      font-size: 16px;
    }
    .chip:hover{ transform: translateY(-1px); }
    .chip.active{
      background: linear-gradient(180deg, rgba(107,91,214,.95), rgba(81,66,200,.95));
      color:#fff;
      box-shadow: 0 10px 22px rgba(107,91,214,.30);
    }
    .chip:focus{ box-shadow: 0 0 0 6px var(--ring), 0 8px 18px rgba(0,0,0,.10); }

    .grid{
      margin-top: 16px;
      display:grid;
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      gap:18px;
    }

    .card{
      background: rgba(255,255,255,.85);
      border: 1px solid rgba(255,255,255,.95);
      border-radius: 22px;
      padding: 12px;
      box-shadow: 0 10px 26px var(--shadow);
      overflow:hidden;
      position:relative;
    }

    .badge{
      position:absolute;
      top:12px;
      right:12px;
      background: rgba(255,255,255,.92);
      border: 1px solid rgba(0,0,0,.06);
      padding: 8px 12px;
      border-radius: 999px;
      font-weight: 1000;
      color:#2b2f3a;
      box-shadow: 0 10px 18px rgba(0,0,0,.08);
      font-size: 13px;
    }

    .thumb{
      width:100%;
      height: 170px;
      object-fit: cover;
      border-radius: 18px;
      cursor: zoom-in;
      border: 1px solid rgba(0,0,0,.06);
      background:#fff;
    }

    .h3{
      margin: 10px 4px 2px;
      font-size: 18px;
      font-weight: 1000;
      line-height: 1.4;
    }

    .desc{
      margin: 0 4px 10px;
      color: var(--muted);
      font-weight: 900;
      font-size: 14px;
    }

    .btnRow{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:10px;
      margin-top: 10px;
    }

    .btn{
      border:0;
      padding: 12px 12px;
      border-radius: 16px;
      font-weight: 1000;
      cursor:pointer;
      font-size: 16px;
      box-shadow: 0 10px 18px rgba(0,0,0,.10);
      display:flex;
      align-items:center;
      justify-content:center;
      gap:8px;
      outline:none;
    }
    .btn:focus{ box-shadow: 0 0 0 6px var(--ring), 0 10px 18px rgba(0,0,0,.10); }

    .btnVideo{
      background: linear-gradient(180deg, #6b5bd6, #5142c8);
      color:#fff;
    }
    .btnQuiz{
      background: linear-gradient(180deg, #18b86a, #129357);
      color:#fff;
    }

    .footer{
      margin-top: 18px;
      text-align:center;
      color:#4b5563;
      font-weight: 1000;
      background: rgba(255,255,255,.70);
      border: 1px solid rgba(255,255,255,.92);
      border-radius: 16px;
      padding: 12px;
      box-shadow: 0 10px 20px rgba(0,0,0,.08);
    }

    /* Lightbox Ù„Ù„ØµÙˆØ±Ø© */
    .lightbox{
      position: fixed;
      inset: 0;
      background: rgba(15, 12, 28, .55);
      display:none;
      align-items:center;
      justify-content:center;
      z-index: 200;
      padding: 14px;
    }
    .lightbox.show{ display:flex; }
    .lightboxInner{
      width: min(1100px, 96vw);
      background: #fff;
      border-radius: 22px;
      overflow:hidden;
      box-shadow: 0 18px 60px rgba(0,0,0,.30);
      border: 1px solid rgba(255,255,255,.25);
      position:relative;
    }
    .lightboxInner img{
      width:100%;
      height:auto;
      display:block;
    }
    .closeX{
      position:absolute;
      top:10px;
      left:10px;
      border:0;
      border-radius: 14px;
      padding: 10px 12px;
      font-weight: 1000;
      cursor:pointer;
      background: rgba(255,255,255,.92);
      box-shadow: 0 10px 18px rgba(0,0,0,.15);
    }

    /* Ù†Ø§ÙØ°Ø© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± */
    .quizOverlay{
      position: fixed;
      inset: 0;
      background: rgba(15, 12, 28, .55);
      display:none;
      align-items:center;
      justify-content:center;
      z-index: 300;
      padding: 14px;
    }
    .quizOverlay.show{ display:flex; }
    .quizBox{
      width: min(820px, 96vw);
      background: #fff;
      border-radius: 22px;
      box-shadow: 0 18px 60px rgba(0,0,0,.30);
      overflow:hidden;
      border: 1px solid rgba(0,0,0,.06);
    }
    .quizHead{
      background: linear-gradient(180deg, rgba(107,91,214,.95), rgba(81,66,200,.95));
      color:#fff;
      padding: 12px 14px;
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:10px;
      flex-wrap:wrap;
    }
    .quizHead .qt{
      font-weight: 1000;
      font-size: 18px;
      margin:0;
    }
    .quizHead .meta{
      font-weight: 1000;
      font-size: 14px;
      opacity:.95;
    }
    .quizBody{
      padding: 14px;
    }
    .qText{
      margin: 4px 0 10px;
      font-weight: 1000;
      font-size: 18px;
      line-height: 1.7;
      color:#1f2430;
    }
    .opts{
      display:flex;
      flex-direction:column;
      gap:10px;
      margin-top: 10px;
    }
    .opt{
      border:0;
      border-radius: 16px;
      padding: 12px 12px;
      font-weight: 1000;
      font-size: 16px;
      cursor:pointer;
      background: linear-gradient(180deg, #2b86ff, #1e74e6);
      color:#fff;
      box-shadow: 0 10px 18px rgba(30,116,230,.22);
      text-align:center;
    }
    .opt.good{ background: linear-gradient(180deg, #7cffb2, #55f09d); color:#0b5a2f; }
    .opt.bad{ background: linear-gradient(180deg, #ff7c9a, #ff5f86); color:#7a0f25; }
    .opt.disabled{ pointer-events:none; opacity:.98; }

    .quizFoot{
      padding: 12px 14px;
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:10px;
      background: #fafafe;
      border-top: 1px solid rgba(0,0,0,.06);
      flex-wrap:wrap;
    }
    .pill{
      background: #fff;
      border: 1px solid rgba(0,0,0,.08);
      padding: 10px 12px;
      border-radius: 999px;
      font-weight: 1000;
      box-shadow: 0 10px 18px rgba(0,0,0,.06);
    }
    .ghost{
      border:0;
      padding: 12px 14px;
      border-radius: 14px;
      font-weight: 1000;
      cursor:pointer;
      background: rgba(107,91,214,.12);
      color:#2b2f3a;
    }

    .toast{
      position: fixed;
      left: 12px;
      bottom: 12px;
      z-index: 500;
      background: rgba(255,255,255,.92);
      border: 1px solid rgba(0,0,0,.08);
      border-radius: 16px;
      padding: 12px 14px;
      font-weight: 1000;
      box-shadow: 0 14px 26px rgba(0,0,0,.14);
      display:none;
      max-width: min(520px, 92vw);
    }
    .toast.show{ display:block; }

    @media (max-width:520px){
      .thumb{ height: 160px; }
      .btn{ font-size: 15px; padding: 12px 10px; }
      .chip{ font-size: 15px; padding: 11px 12px; }
    }
  </style>
</head>

<body>
  <div class="wrap">

    <div class="topbar">
      <div class="topRow">
        <div>
          <h1 class="title">Ù…Ù‡Ø§Ø±Ø§Øª Ù„ØºØªÙŠ Ø§Ù„Ù…Ù…ØªØ¹Ø©</h1>
          <p class="subtitle">Ø§Ø®ØªØ± Ù…Ù‡Ø§Ø±Ø© Ù…Ù† Ø§Ù„Ø´Ø±ÙŠØ· Ø«Ù… Ø´Ø§Ù‡Ø¯ Ø§Ù„Ø´Ø±Ø­ ÙˆØ§Ø¨Ø¯Ø£ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±.</p>
        </div>

        <a class="homeBtn" href="index.html">ğŸ  Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³Ø©</a>
      </div>

      <div class="chips" id="chips"></div>
    </div>

    <div class="grid" id="grid"></div>

    <div class="footer">ØªØµÙ…ÙŠÙ…: ØµØ§Ù„Ø­Ø© Ø¹Ù„ÙŠ Ø§Ù„ØºØ§Ù…Ø¯ÙŠ</div>
  </div>

  <!-- ØªÙƒØ¨ÙŠØ± Ø§Ù„ØµÙˆØ±Ø© -->
  <div class="lightbox" id="lightbox" aria-hidden="true">
    <div class="lightboxInner">
      <button class="closeX" type="button" onclick="closeLightbox()">âœ– Ø¥ØºÙ„Ø§Ù‚</button>
      <img id="lightboxImg" alt="ØµÙˆØ±Ø© Ø§Ù„Ù…Ù‡Ø§Ø±Ø©" />
    </div>
  </div>

  <!-- Ù†Ø§ÙØ°Ø© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± -->
  <div class="quizOverlay" id="quizOverlay" aria-hidden="true">
    <div class="quizBox">
      <div class="quizHead">
        <p class="qt" id="quizTitle">Ø§Ø®ØªØ¨Ø§Ø±</p>
        <div class="meta" id="quizMeta">Ø§Ù„Ø³Ø¤Ø§Ù„ 1 Ù…Ù† 5</div>
      </div>

      <div class="quizBody">
        <div class="qText" id="qText">â€”</div>
        <div class="opts" id="opts"></div>
      </div>

      <div class="quizFoot">
        <div class="pill" id="scorePill">âœ… 0 | âŒ 0</div>
        <button class="ghost" type="button" onclick="closeQuiz()">Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±</button>
      </div>
    </div>
  </div>

  <div class="toast" id="toast">â€”</div>

  <script>
    /***********************
     * Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ù‡Ø§Ø±Ø§Øª (20)
     ***********************/
    const SKILLS = [
      { id:"word_types",   name:"Ø£Ù‚Ø³Ø§Ù… Ø§Ù„ÙƒÙ„Ù…Ø©",                 img:"image/skill_word_types.png",      video:"https://youtu.be/CvTvx1TRYw4" },
      { id:"verb_types",   name:"Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„ÙØ¹Ù„",                  img:"image/skill_verb-types.png",      video:"https://youtu.be/-fNt_5kOvIs" },

      { id:"title",        name:"Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù†Øµ",                   img:"image/skill_title.png",           video:"https://youtu.be/KWRbbfoP20c" },
      // ÙŠÙˆØ¬Ø¯ Ø±Ø§Ø¨Ø· Ø¥Ø¶Ø§ÙÙŠ Ø¹Ù†Ø¯Ùƒ Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù†ØµØŒ ØªØ±ÙƒØª Ø§Ù„Ø£ÙˆÙ„ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ ÙÙ‚Ø· (Ø¥Ø°Ø§ ØªØ¨ÙŠÙ† Ø§Ù„Ø«Ø§Ù†ÙŠ Ù‚ÙˆÙ„ÙŠ)

      { id:"tanween",      name:"Ø§Ù„ØªÙ†ÙˆÙŠÙ†",                      img:"image/skill_tanween.png",         video:"https://youtu.be/U3D7_jGq5NA" },
      { id:"tafdeel",      name:"Ø§Ø³Ù… Ø§Ù„ØªÙØ¶ÙŠÙ„",                  img:"image/skill_tafdeel.png",         video:"https://youtu.be/pl5BGnN-Cdc" },

      { id:"taa",          name:"Ø§Ù„ØªØ§Ø¡ Ø§Ù„Ù…Ø±Ø¨ÙˆØ·Ø© ÙˆØ§Ù„ØªØ§Ø¡ Ø§Ù„Ù…ÙØªÙˆØ­Ø© ÙˆØ§Ù„Ù‡Ø§Ø¡", img:"image/skill_taa-skills.png", video:"https://youtu.be/R8fLZZjPZ6I" },

      { id:"synonyms",     name:"Ø§Ù„Ù…Ø±Ø§Ø¯ÙØ§Øª",                    img:"image/skill_synonyms.png",        video:"https://youtu.be/Ue9sNE6oF98" },
      { id:"antonyms",     name:"Ø§Ù„Ø£Ø¶Ø¯Ø§Ø¯",                      img:"image/skill_antonyms.png",        video:"https://youtu.be/kqTJtHz8U-Y" },

      { id:"sun_moon",     name:"Ø§Ù„Ù„Ø§Ù… Ø§Ù„Ø´Ù…Ø³ÙŠØ© ÙˆØ§Ù„Ù„Ø§Ù… Ø§Ù„Ù‚Ù…Ø±ÙŠØ©", img:"image/skill_sun-moon-lam.png",    video:"https://youtu.be/3-B4xd83GXw" },

      { id:"sentence",     name:"Ø§Ù„Ø¬Ù…Ù„Ø© Ø§Ù„Ù…ÙÙŠØ¯Ø©",               img:"image/skill_sentence.png",        video:"https://youtu.be/4NxjcMu9kV4" },

      { id:"punctuation",  name:"Ø£Ø¯ÙˆØ§Øª Ø§Ù„ØªØ±Ù‚ÙŠÙ…",                img:"image/skill_punctuation.png",     video:"https://youtu.be/BpVqfG4LbCc" },

      { id:"number",       name:"Ø§Ù„Ù…ÙØ±Ø¯ ÙˆØ§Ù„Ù…Ø«Ù†Ù‰ ÙˆØ§Ù„Ø¬Ù…Ø¹",        img:"image/skill_number.png",          video:"https://youtu.be/fAdCP1qmLR0" },

      { id:"main_idea",    name:"Ø§Ù„ÙÙƒØ±Ø© Ø§Ù„Ø±Ø¦ÙŠØ³Ø©",              img:"image/skill_main_idea.png",        video:"https://youtu.be/jhuaaQjiZIs" },

      { id:"mad",          name:"Ø­Ø±ÙˆÙ Ø§Ù„Ù…Ø¯",                    img:"image/skill_mad-letters.png",     video:"https://youtu.be/MbTOjRgayT0" },

      { id:"gender",       name:"Ø§Ù„Ù…Ø°ÙƒØ± ÙˆØ§Ù„Ù…Ø¤Ù†Ø«",              img:"image/skill_gender.png",           video:"https://youtu.be/ufdUobvMz-E" },

      { id:"fael_mafool",  name:"Ø§Ø³Ù… Ø§Ù„ÙØ§Ø¹Ù„ ÙˆØ§Ø³Ù… Ø§Ù„Ù…ÙØ¹ÙˆÙ„",      img:"image/skill_fael-mafool.png",      video:"https://youtu.be/BgrU8E4PhGE" },

      { id:"exception",    name:"Ø£Ø³Ù„ÙˆØ¨ Ø§Ù„Ø§Ø³ØªØ«Ù†Ø§Ø¡",             img:"image/skill_exception.png",        video:"https://youtu.be/_l3t_vDpIJE" },

      { id:"compare",      name:"Ø£ÙˆØ¬Ù‡ Ø§Ù„Ø´Ø¨Ù‡ ÙˆØ§Ù„Ø§Ø®ØªÙ„Ø§Ù",         img:"image/skill_compare.png",          video:"https://youtu.be/ySR-1AgoQPY" },

      // Ù…Ù‡Ø§Ø±ØªØ§Ù† ÙƒØ§Ù†Øª Ø¹Ù†Ø¯Ùƒ Ø¨Ø§Ø³Ù… â€œÙ…ÙƒÙˆÙ†Ø§Øª Ø§Ù„Ù†Øµ / Ø¹Ù†Ø§ØµØ± Ø§Ù„Ù†Øµ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©â€
      { id:"text_parts",   name:"Ø¹Ù†Ø§ØµØ± Ø§Ù„Ù†Øµ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©",          img:"image/skill_text_parts.png",       video:"https://youtu.be/ZA0fn1a7VUg" },
      { id:"text_elements",name:"Ø¹Ù†Ø§ØµØ± Ø§Ù„Ù†Øµ (Ø§Ù„Ø´Ø®ØµÙŠØ§Øª â€“ Ø§Ù„Ø²Ù…Ø§Ù† â€“ Ø§Ù„Ù…ÙƒØ§Ù†)", img:"image/skill_text_elements.png", video:"https://youtu.be/ZA0fn1a7VUg" },
    ];

    /***********************
     * Ø¨Ù†Ùƒ Ø£Ø³Ø¦Ù„Ø© Ø¹Ø§Ù… (5 Ù„ÙƒÙ„ Ù…Ù‡Ø§Ø±Ø©)
     * (Ù†ÙØ³ Ù‚Ø§Ù„Ø¨ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ù„ÙƒÙ† ØªØªØºÙŠØ± Ø­Ø³Ø¨ Ø§Ù„Ù…Ù‡Ø§Ø±Ø©)
     ***********************/
    function buildQuizForSkill(skillName){
      // Ø£Ø³Ø¦Ù„Ø© Ø¹Ø§Ù…Ø© Ù…Ù†Ø§Ø³Ø¨Ø© Ù„Ù„Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ + Ø³Ù‡Ù„Ø© Ù„Ù„Ø¹Ø±Ø¶ Ø¹Ù„Ù‰ Ø§Ù„Ø³Ø¨ÙˆØ±Ø©
      const base = [
        {
          q:`Ù…Ø§ Ø§Ù„Ù…Ù‚ØµÙˆØ¯ Ø¨Ù…Ù‡Ø§Ø±Ø© Â«${skillName}Â»ØŸ`,
          a:`Ù‡ÙŠ Ù…Ù‡Ø§Ø±Ø© ØªØ³Ø§Ø¹Ø¯ Ø§Ù„Ø·Ø§Ù„Ø¨ Ø¹Ù„Ù‰ ÙÙ‡Ù… ÙˆØ§Ø³ØªØ®Ø¯Ø§Ù… Â«${skillName}Â» Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­.`,
          w:[`Ù‡ÙŠ Ù…Ù‡Ø§Ø±Ø© Ø®Ø§ØµØ© Ø¨Ø§Ù„Ø­Ø³Ø§Ø¨ ÙÙ‚Ø·.`,`Ù‡ÙŠ Ù…Ù‡Ø§Ø±Ø© Ù„Ù„Ø±Ø³Ù… ÙˆØ§Ù„ØªÙ„ÙˆÙŠÙ† ÙÙ‚Ø·.`,`Ù‡ÙŠ Ù…Ù‡Ø§Ø±Ø© Ù„Ø§ Ø¹Ù„Ø§Ù‚Ø© Ù„Ù‡Ø§ Ø¨Ø§Ù„Ù„ØºØ©.`]
        },
        {
          q:`Ø£ÙŠ Ø§Ø®ØªÙŠØ§Ø± ÙŠÙØ¹Ø¯ Ù…Ø«Ø§Ù„Ù‹Ø§ Ù…Ù†Ø§Ø³Ø¨Ù‹Ø§ Ø¹Ù„Ù‰ Â«${skillName}Â»ØŸ`,
          a:`Ù…Ø«Ø§Ù„ ØµØ­ÙŠØ­ Ù…Ø±ØªØ¨Ø· Ø¨Ù€ Â«${skillName}Â».`,
          w:[`Ù…Ø«Ø§Ù„ Ù„Ø§ ÙŠØ±ØªØ¨Ø· Ø¨Ø§Ù„Ù…Ù‡Ø§Ø±Ø©.`,`Ù…Ø«Ø§Ù„ Ø¹Ø´ÙˆØ§Ø¦ÙŠ ØºÙŠØ± ØµØ­ÙŠØ­.`,`Ù…Ø«Ø§Ù„ ÙŠØ®Ø§Ù„Ù Ø§Ù„Ù‚Ø§Ø¹Ø¯Ø©.`]
        },
        {
          q:`Ù…Ø§ Ø§Ù„ÙØ§Ø¦Ø¯Ø© Ù…Ù† ØªØ¹Ù„Ù… Â«${skillName}Â»ØŸ`,
          a:`ÙŠØ³Ø§Ø¹Ø¯ Ø¹Ù„Ù‰ ØªØ­Ø³ÙŠÙ† Ø§Ù„Ù‚Ø±Ø§Ø¡Ø© ÙˆØ§Ù„ÙƒØªØ§Ø¨Ø© ÙˆØ§Ù„ÙÙ‡Ù….`,
          w:[`ÙŠØ¬Ø¹Ù„ Ø§Ù„Ø·Ø§Ù„Ø¨ ÙŠØªØ±Ùƒ Ø§Ù„Ø¯Ø±Ø§Ø³Ø©.`,`Ù„Ø§ ÙØ§Ø¦Ø¯Ø© Ù…Ù†Ù‡.`,`ÙŠØ³ØªØ®Ø¯Ù… ÙÙ‚Ø· ÙÙŠ Ø§Ù„Ù„Ø¹Ø¨.`]
        },
        {
          q:`Ø¹Ù†Ø¯ Ø§Ù„ØªØ¯Ø±ÙŠØ¨ Ø¹Ù„Ù‰ Â«${skillName}Â» Ù…Ø§ Ø§Ù„Ø®Ø·ÙˆØ© Ø§Ù„Ø£ÙØ¶Ù„ Ø£ÙˆÙ„Ù‹Ø§ØŸ`,
          a:`Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ù…Ø«Ø§Ù„ Ø¬ÙŠØ¯Ù‹Ø§ Ø«Ù… ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù‚Ø§Ø¹Ø¯Ø©.`,
          w:[`Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø¨Ø³Ø±Ø¹Ø© Ø¯ÙˆÙ† Ù‚Ø±Ø§Ø¡Ø©.`,`ØªØ¬Ø§Ù‡Ù„ Ø§Ù„Ø³Ø¤Ø§Ù„.`,`Ù†Ø³Ø® Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø¯ÙˆÙ† ÙÙ‡Ù….`]
        },
        {
          q:`Ø£ÙŠ Ø³Ù„ÙˆÙƒ ÙŠØ¯Ù„ Ø¹Ù„Ù‰ Ø¥ØªÙ‚Ø§Ù† Â«${skillName}Â»ØŸ`,
          a:`ÙŠØ·Ø¨Ù‚ Ø§Ù„Ø·Ø§Ù„Ø¨ Ø§Ù„Ù…Ù‡Ø§Ø±Ø© ÙÙŠ Ø£Ù…Ø«Ù„Ø© Ø¬Ø¯ÙŠØ¯Ø© Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­.`,
          w:[`ÙŠÙƒØ±Ø± Ø£Ø®Ø·Ø§Ø¡Ù‡ Ø¯Ø§Ø¦Ù…Ù‹Ø§.`,`Ù„Ø§ ÙŠØ­Ø§ÙˆÙ„ Ø§Ù„Ø­Ù„.`,`ÙŠÙƒØªØ¨ Ø¥Ø¬Ø§Ø¨Ø§Øª Ø¹Ø´ÙˆØ§Ø¦ÙŠØ©.`]
        },
      ];

      // Ù†Ø¹Ø¯Ù„ Ø§Ù„Ù†ØµÙˆØµ Ù„ØªØ¨Ø¯Ùˆ Ø·Ø¨ÙŠØ¹ÙŠØ© Ø£ÙƒØ«Ø±
      return base.map((it, i)=>({
        q: it.q,
        correct: it.a,
        wrong: it.w
      }));
    }

    /***********************
     * ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ù‡Ø§Ø±Ø§Øª
     ***********************/
    const chips = document.getElementById("chips");
    const grid  = document.getElementById("grid");

    let activeSkillId = null;

    function renderChips(){
      chips.innerHTML = "";
      SKILLS.forEach(s=>{
        const b = document.createElement("button");
        b.className = "chip" + (s.id===activeSkillId ? " active":"");
        b.type="button";
        b.textContent = s.name;
        b.addEventListener("click", ()=>{
          activeSkillId = s.id;
          renderChips();
          scrollToCard(s.id);
        });
        chips.appendChild(b);
      });
    }

    function renderCards(){
      grid.innerHTML = "";
      SKILLS.forEach((s, idx)=>{
        const card = document.createElement("div");
        card.className = "card";
        card.id = "card-" + s.id;

        const badge = document.createElement("div");
        badge.className = "badge";
        badge.textContent = `Ù…Ù‡Ø§Ø±Ø© ${idx+1} / ${SKILLS.length}`;
        card.appendChild(badge);

        const img = document.createElement("img");
        img.className = "thumb";
        img.src = s.img;
        img.alt = s.name;
        img.loading = "lazy";
        img.addEventListener("click", ()=> openLightbox(s.img));
        card.appendChild(img);

        const h3 = document.createElement("div");
        h3.className = "h3";
        h3.textContent = s.name;
        card.appendChild(h3);

        const p = document.createElement("div");
        p.className = "desc";
        p.textContent = "Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„ØµÙˆØ±Ø© Ù„Ù„ØªÙƒØ¨ÙŠØ±ØŒ Ø«Ù… Ø´Ø§Ù‡Ø¯ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ø£Ùˆ Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±.";
        card.appendChild(p);

        const row = document.createElement("div");
        row.className = "btnRow";

        const v = document.createElement("button");
        v.className = "btn btnVideo";
        v.type="button";
        v.innerHTML = "ğŸ¬ ÙÙŠØ¯ÙŠÙˆ ÙƒØ±ØªÙˆÙ†ÙŠ";
        v.addEventListener("click", ()=> openVideo(s.video));
        row.appendChild(v);

        const q = document.createElement("button");
        q.className = "btn btnQuiz";
        q.type="button";
        q.innerHTML = "ğŸ“ Ø§Ø®ØªØ¨Ø§Ø± (5 Ø£Ø³Ø¦Ù„Ø©)";
        q.addEventListener("click", ()=> startQuiz(s));
        row.appendChild(q);

        card.appendChild(row);
        grid.appendChild(card);
      });
    }

    function scrollToCard(id){
      const el = document.getElementById("card-" + id);
      if(!el) return;
      el.scrollIntoView({ behavior:"smooth", block:"start" });
    }

    /***********************
     * Ø§Ù„ÙÙŠØ¯ÙŠÙˆ
     ***********************/
    function openVideo(url){
      if(!url){
        toast("Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø±Ø§Ø¨Ø· ÙÙŠØ¯ÙŠÙˆ Ù„Ù‡Ø°Ù‡ Ø§Ù„Ù…Ù‡Ø§Ø±Ø© Ø§Ù„Ø¢Ù†.");
        return;
      }
      window.open(url, "_blank");
    }

    /***********************
     * ØªÙƒØ¨ÙŠØ± Ø§Ù„ØµÙˆØ±Ø©
     ***********************/
    const lightbox = document.getElementById("lightbox");
    const lightboxImg = document.getElementById("lightboxImg");

    function openLightbox(src){
      lightboxImg.src = src;
      lightbox.classList.add("show");
      lightbox.setAttribute("aria-hidden","false");
    }
    function closeLightbox(){
      lightbox.classList.remove("show");
      lightbox.setAttribute("aria-hidden","true");
      lightboxImg.src = "";
    }
    lightbox.addEventListener("click", (e)=>{
      if(e.target === lightbox) closeLightbox();
    });

    /***********************
     * Ø£ØµÙˆØ§Øª ÙˆØªØ´Ø¬ÙŠØ¹ (WebAudio)
     ***********************/
    let audioCtx = null;
    let unlocked = false;

    function ensureAudio(){
      if(!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)();
      if(audioCtx.state === "suspended") audioCtx.resume();
      unlocked = true;
    }

    function tone({ type="sine", f1=440, f2=null, dur=0.16, gain=0.10 }){
      if(!unlocked || !audioCtx) return;
      const ctx = audioCtx;
      const t0 = ctx.currentTime;

      const osc = ctx.createOscillator();
      const g = ctx.createGain();
      osc.type = type;
      osc.frequency.setValueAtTime(f1, t0);
      if(f2 !== null) osc.frequency.linearRampToValueAtTime(f2, t0 + dur);

      g.gain.setValueAtTime(0.0001, t0);
      g.gain.exponentialRampToValueAtTime(gain, t0 + 0.01);
      g.gain.exponentialRampToValueAtTime(0.0001, t0 + dur);

      osc.connect(g); g.connect(ctx.destination);
      osc.start(t0);
      osc.stop(t0 + dur + 0.03);
    }

    function soundCorrect(){
      tone({ type:"triangle", f1:760, f2:1120, dur:0.16, gain:0.11 });
      setTimeout(()=>tone({ type:"sine", f1:1100, f2:1380, dur:0.12, gain:0.09 }), 90);
    }
    function soundWrong(){
      tone({ type:"sawtooth", f1:320, f2:170, dur:0.24, gain:0.14 });
      setTimeout(()=>tone({ type:"sawtooth", f1:240, f2:140, dur:0.20, gain:0.13 }), 120);
    }

    window.addEventListener("pointerdown", ()=> ensureAudio(), { once:true });

    /***********************
     * Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± (5 Ø£Ø³Ø¦Ù„Ø©)
     ***********************/
    const quizOverlay = document.getElementById("quizOverlay");
    const quizTitle   = document.getElementById("quizTitle");
    const quizMeta    = document.getElementById("quizMeta");
    const qText       = document.getElementById("qText");
    const opts        = document.getElementById("opts");
    const scorePill   = document.getElementById("scorePill");

    let quiz = null;
    let qi = 0;
    let ok = 0;
    let bad = 0;
    let locked = false;

    function shuffle(arr){
      const a = arr.slice();
      for(let i=a.length-1;i>0;i--){
        const j = Math.floor(Math.random()*(i+1));
        [a[i],a[j]]=[a[j],a[i]];
      }
      return a;
    }

    function startQuiz(skill){
      ensureAudio();
      quiz = buildQuizForSkill(skill.name);
      qi = 0; ok = 0; bad = 0;
      locked = false;

      quizTitle.textContent = `Ø§Ø®ØªØ¨Ø§Ø±: ${skill.name}`;
      scorePill.textContent = `âœ… ${ok} | âŒ ${bad}`;

      quizOverlay.classList.add("show");
      quizOverlay.setAttribute("aria-hidden","false");
      renderQuestion();
    }

    function renderQuestion(){
      locked = false;
      const item = quiz[qi];
      quizMeta.textContent = `Ø§Ù„Ø³Ø¤Ø§Ù„ ${qi+1} Ù…Ù† ${quiz.length}`;
      qText.textContent = item.q;

      const choices = shuffle([item.correct, ...item.wrong]).slice(0,4);
      opts.innerHTML = "";
      choices.forEach(choice=>{
        const b = document.createElement("button");
        b.className = "opt";
        b.type="button";
        b.textContent = choice;
        b.addEventListener("click", ()=> answer(choice, item.correct));
        opts.appendChild(b);
      });
    }

    function answer(chosen, correct){
      if(locked) return;
      locked = true;

      const buttons = [...opts.children];
      buttons.forEach(x=> x.classList.add("disabled"));

      const isCorrect = (chosen.trim() === correct.trim());

      buttons.forEach(btn=>{
        if(btn.textContent.trim() === correct.trim()) btn.classList.add("good");
        if(btn.textContent.trim() === chosen.trim() && !isCorrect) btn.classList.add("bad");
      });

      if(isCorrect){
        ok++;
        soundCorrect();
        toast(randomEncourage(true));
      }else{
        bad++;
        soundWrong();
        toast(randomEncourage(false));
      }

      scorePill.textContent = `âœ… ${ok} | âŒ ${bad}`;

      setTimeout(()=>{
        qi++;
        if(qi >= quiz.length){
          toast(`Ø§Ù†ØªÙ‡Ù‰ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± ğŸ‘ Ù†ØªÙŠØ¬ØªÙƒ: âœ… ${ok} | âŒ ${bad}`);
          setTimeout(()=> closeQuiz(), 600);
        }else{
          renderQuestion();
        }
      }, 650);
    }

    function closeQuiz(){
      quizOverlay.classList.remove("show");
      quizOverlay.setAttribute("aria-hidden","true");
      quiz = null;
    }

    quizOverlay.addEventListener("click", (e)=>{
      if(e.target === quizOverlay) closeQuiz();
    });

    function randomEncourage(correct){
      const good = ["Ø£Ø­Ø³Ù†Øª! Ù…Ù…ØªØ§Ø² ğŸ‘","Ø±Ø§Ø¦Ø¹ Ø¬Ø¯Ù‹Ø§ â­","Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø© âœ…","Ø¨Ø·Ù„! ÙƒÙ…Ù„ ğŸ‘Œ","Ù…Ù…ØªØ§Ø²!"];
      const bad  = ["Ù‚Ø±ÙŠØ¨! Ø¬Ø±Ù‘Ø¨ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ ğŸ’ª","Ù„Ø§ Ø¨Ø£Ø³â€¦ Ø±ÙƒÙ‘Ø² âœ…","Ù…Ø­Ø§ÙˆÙ„Ø© Ø¬ÙŠØ¯Ø© ğŸ‘","ØªØ§Ø¨Ø¹â€¦ Ø£Ù†Øª Ù‚Ø§Ø¯Ø± ğŸŒŸ","Ø¬Ø±Ø¨ Ù…Ø±Ø© Ø«Ø§Ù†ÙŠØ©"];
      const arr = correct ? good : bad;
      return arr[Math.floor(Math.random()*arr.length)];
    }

    /***********************
     * Toast
     ***********************/
    const toastEl = document.getElementById("toast");
    let toastTimer = null;

    function toast(msg){
      toastEl.textContent = msg;
      toastEl.classList.add("show");
      clearTimeout(toastTimer);
      toastTimer = setTimeout(()=> toastEl.classList.remove("show"), 1600);
    }

    /***********************
     * ØªØ´ØºÙŠÙ„ Ø£ÙˆÙ„ÙŠ
     ***********************/
    function init(){
      activeSkillId = SKILLS[0]?.id || null;
      renderChips();
      renderCards();

      // Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø¹Ù†Ø¯Ùƒ Ù…Ù‡Ø§Ø±ØªÙŠÙ† ØµÙˆØ±Ù‡Ø§ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯Ø© (text_parts / text_elements)
      // ÙÙ‚Ø· Ø§Ø±ÙØ¹ÙŠ ØµÙˆØ±Ù‡Ø§ Ø¯Ø§Ø®Ù„ image Ø¨Ù†ÙØ³ Ø§Ù„Ø£Ø³Ù…Ø§Ø¡:
      // image/skill_text_parts.png
      // image/skill_text_elements.png
      // Ø£Ùˆ Ù‚ÙˆÙ„ÙŠ Ù„ÙŠ Ø£Ø³Ù…Ø§Ø¡ ØµÙˆØ±Ùƒ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ© ÙˆØ³Ø£Ø¹Ø¯Ù„Ù‡Ø§ Ù„Ùƒ Ù…Ø¨Ø§Ø´Ø±Ø©.
    }
    init();
  </script>
</body>
</html>
