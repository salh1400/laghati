<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ù…Ù‡Ø§Ø±Ø§Øª Ù„ØºØªÙŠ Ø§Ù„Ù…Ù…ØªØ¹Ø©</title>

  <style>
    :root{
      /* Ø£Ù„ÙˆØ§Ù† Ù…Ù†Ø§Ø³Ø¨Ø© Ù„Ù„Ø³Ø¨ÙˆØ±Ø©: ØªØ¨Ø§ÙŠÙ† Ù‚ÙˆÙŠ + Ù…Ø¨Ù‡Ø¬Ø© */
      --bg1:#0b1220;
      --bg2:#0f1b3d;
      --card:#ffffff;
      --ink:#0f172a;
      --muted:#475569;

      --pri:#2563eb;     /* Ø£Ø²Ø±Ù‚ ÙˆØ§Ø¶Ø­ */
      --pri2:#1d4ed8;
      --ok:#16a34a;      /* Ø£Ø®Ø¶Ø± */
      --bad:#ef4444;     /* Ø£Ø­Ù…Ø± */
      --gold:#f59e0b;    /* Ø°Ù‡Ø¨ÙŠ Ù„Ù„ØªØ´Ø¬ÙŠØ¹ */
      --chip:#e2e8f0;
    }

    *{ box-sizing:border-box; }
    body{
      margin:0;
      font-family: "Cairo", system-ui, Arial;
      background: radial-gradient(1200px 700px at 20% 20%, #1b2a5a 0%, var(--bg1) 45%, #070b14 100%);
      color:#fff;
      min-height:100vh;
      padding:18px;
    }

    /* Ø´Ø±ÙŠØ· Ø¹Ù„ÙˆÙŠ Ù…Ù†Ø§Ø³Ø¨ Ù„Ù„Ø³Ø¨ÙˆØ±Ø© */
    .topbar{
      max-width:1200px;
      margin:0 auto 14px;
      padding:14px 16px;
      background: linear-gradient(90deg, rgba(37,99,235,.35), rgba(245,158,11,.25));
      border:1px solid rgba(255,255,255,.18);
      border-radius:18px;
      box-shadow:0 18px 40px rgba(0,0,0,.25);
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      flex-wrap:wrap;
    }
    .brand{
      display:flex;
      align-items:center;
      gap:12px;
    }
    .logo{
      width:46px;height:46px;
      border-radius:14px;
      background: linear-gradient(135deg, #60a5fa, #f59e0b);
      display:grid;
      place-items:center;
      font-weight:900;
      color:#0b1220;
      box-shadow:0 12px 26px rgba(0,0,0,.25);
      user-select:none;
    }
    .titlebox h1{
      margin:0;
      font-size:26px; /* ÙƒØ¨ÙŠØ± Ù„Ù„Ø³Ø¨ÙˆØ±Ø© */
      letter-spacing:.3px;
    }
    .titlebox p{
      margin:2px 0 0;
      color:rgba(255,255,255,.85);
      font-size:14px;
    }

    .top-actions{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
    }
    .btn{
      border:none;
      cursor:pointer;
      padding:12px 16px; /* ÙƒØ¨ÙŠØ± Ù„Ù„Ø³Ø¨ÙˆØ±Ø© */
      border-radius:14px;
      font-weight:800;
      font-size:15px;
      color:#fff;
      background: rgba(255,255,255,.10);
      border:1px solid rgba(255,255,255,.18);
      transition:.2s;
      user-select:none;
    }
    .btn:hover{ transform: translateY(-2px); }
    .btn:active{ transform: translateY(0); }

    .btn-home{ background: linear-gradient(135deg, rgba(37,99,235,.9), rgba(29,78,216,.9)); }
    .btn-sound{ background: linear-gradient(135deg, rgba(245,158,11,.92), rgba(234,88,12,.92)); }

    /* Ø´Ø±ÙŠØ· Ø¨Ø­Ø« Ø³Ø±ÙŠØ¹ (Ø§Ø®ØªÙŠØ§Ø± Ù…Ù‡Ø§Ø±Ø©) */
    .toolbar{
      max-width:1200px;
      margin:0 auto 14px;
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
      justify-content:space-between;
    }
    .search{
      flex:1;
      min-width:260px;
      display:flex;
      gap:10px;
      align-items:center;
      padding:10px 12px;
      border-radius:16px;
      background: rgba(255,255,255,.10);
      border:1px solid rgba(255,255,255,.18);
    }
    .search input{
      width:100%;
      border:none;
      outline:none;
      background:transparent;
      color:#fff;
      font-size:16px; /* ÙƒØ¨ÙŠØ± Ù„Ù„Ø³Ø¨ÙˆØ±Ø© */
    }
    .hint{
      color:rgba(255,255,255,.85);
      font-size:14px;
      user-select:none;
    }

    /* Ø´Ø¨ÙƒØ© Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª */
    .skills{
      max-width:1200px;
      margin:0 auto 20px;
      display:grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap:18px;
    }

    /* Ø¨Ø·Ø§Ù‚Ø© Ù…Ù‡Ø§Ø±Ø©: Ø§Ù„ØµÙˆØ±Ø© â€œØ´Ø±Ø­ Ø¨ØµØ±ÙŠâ€ */
    .card{
      background: rgba(255,255,255,.95);
      color: var(--ink);
      border-radius:20px;
      overflow:hidden;
      box-shadow: 0 18px 40px rgba(0,0,0,.25);
      border: 1px solid rgba(15,23,42,.08);
      transition:.25s;
    }
    .card:hover{ transform: translateY(-4px); }

    .imgwrap{
      position:relative;
      background:#f8fafc;
      cursor: zoom-in;
    }
    .imgwrap img{
      width:100%;
      display:block;
    }
    .zoomBadge{
      position:absolute;
      top:10px;
      left:10px;
      background: rgba(15,23,42,.78);
      color:#fff;
      padding:7px 10px;
      border-radius:12px;
      font-weight:800;
      font-size:13px;
    }

    .cardbody{
      padding:14px 14px 16px;
    }
    .card h3{
      margin:2px 0 10px;
      font-size:20px; /* Ø£ÙƒØ¨Ø± Ù„Ù„Ø³Ø¨ÙˆØ±Ø© */
      color:#0f172a;
    }
    .sub{
      margin:0 0 12px;
      color: var(--muted);
      font-size:14px;
    }

    .actions{
      display:flex;
      gap:10px;
    }
    .actions button{
      flex:1;
      padding:12px;
      border:none;
      border-radius:14px;
      font-weight:900;
      font-size:15px; /* Ø£ÙƒØ¨Ø± */
      cursor:pointer;
      transition:.2s;
    }
    .actions button:hover{ transform: translateY(-2px); }
    .actions button:active{ transform: translateY(0); }

    .video{
      background: linear-gradient(135deg, #2563eb, #1d4ed8);
      color:#fff;
    }
    .quiz{
      background: linear-gradient(135deg, #16a34a, #15803d);
      color:#fff;
    }

    /* Ù†Ø§ÙØ°Ø© ØªÙƒØ¨ÙŠØ± Ø§Ù„ØµÙˆØ±Ø© */
    .modal{
      position:fixed;
      inset:0;
      background: rgba(0,0,0,.65);
      display:none;
      align-items:center;
      justify-content:center;
      padding:18px;
      z-index:999;
    }
    .modal.open{ display:flex; }
    .modalCard{
      width:min(1100px, 96vw);
      max-height: 90vh;
      background:#0b1220;
      border:1px solid rgba(255,255,255,.18);
      border-radius:18px;
      overflow:hidden;
      box-shadow:0 26px 60px rgba(0,0,0,.4);
      position:relative;
    }
    .modalHead{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:10px;
      padding:12px 14px;
      background: linear-gradient(90deg, rgba(37,99,235,.35), rgba(245,158,11,.25));
      color:#fff;
      font-weight:900;
      font-size:16px;
    }
    .close{
      border:none;
      cursor:pointer;
      padding:10px 12px;
      border-radius:12px;
      background: rgba(255,255,255,.18);
      color:#fff;
      font-weight:900;
      font-size:14px;
    }
    .modalImgWrap{
      background:#fff;
      padding:10px;
      display:flex;
      justify-content:center;
      align-items:center;
      max-height: calc(90vh - 56px);
    }
    .modalImgWrap img{
      width:100%;
      height:auto;
      max-height: calc(90vh - 76px);
      object-fit: contain;
      border-radius:12px;
      background:#fff;
    }

    /* Ù†Ø§ÙØ°Ø© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± */
    .quizModal .modalCard{ background:#ffffff; color:var(--ink); }
    .quizModal .modalHead{ color:#fff; }
    .quizBody{
      padding:16px;
      max-height: calc(90vh - 56px);
      overflow:auto;
    }
    .qTop{
      display:flex;
      justify-content:space-between;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
      margin-bottom:10px;
    }
    .pill{
      background: var(--chip);
      padding:8px 12px;
      border-radius:999px;
      font-weight:900;
      font-size:14px;
      color:#0f172a;
    }
    .question{
      margin:10px 0 12px;
      font-size:20px; /* ÙƒØ¨ÙŠØ± Ù„Ù„Ø³Ø¨ÙˆØ±Ø© */
      font-weight:900;
      color:#0f172a;
    }
    .choices{
      display:grid;
      gap:10px;
      margin-bottom:14px;
    }
    .choice{
      border:2px solid rgba(15,23,42,.10);
      background:#f8fafc;
      padding:12px 12px;
      border-radius:14px;
      cursor:pointer;
      font-weight:800;
      font-size:16px; /* ÙƒØ¨ÙŠØ± */
      transition:.15s;
    }
    .choice:hover{ transform: translateY(-2px); }
    .choice.correct{ border-color: rgba(22,163,74,.8); background: rgba(22,163,74,.12); }
    .choice.wrong{ border-color: rgba(239,68,68,.8); background: rgba(239,68,68,.12); }

    .qActions{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      justify-content:space-between;
      align-items:center;
      margin-top:8px;
    }
    .btn2{
      border:none;
      cursor:pointer;
      padding:12px 14px;
      border-radius:14px;
      font-weight:900;
      font-size:15px;
      color:#fff;
      background: linear-gradient(135deg, #2563eb, #1d4ed8);
    }
    .btn2.secondary{
      background: rgba(15,23,42,.10);
      color:#0f172a;
      border:1px solid rgba(15,23,42,.12);
    }

    .result{
      margin-top:10px;
      padding:12px;
      border-radius:14px;
      background:#f1f5f9;
      border:1px solid rgba(15,23,42,.10);
      font-weight:900;
      font-size:16px;
      display:none;
    }

    footer{
      max-width:1200px;
      margin:0 auto;
      padding:10px 4px 0;
      color:rgba(255,255,255,.8);
      font-size:13px;
      text-align:center;
    }

    /* ÙˆØ¶Ø¹ Ø§Ù„Ø³Ø¨ÙˆØ±Ø©: ØªÙƒØ¨ÙŠØ± Ø¥Ø¶Ø§ÙÙŠ Ù„Ù„Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„ÙƒØ¨ÙŠØ±Ø© */
    @media (min-width: 1100px){
      .titlebox h1{ font-size:30px; }
      .card h3{ font-size:22px; }
      .actions button{ font-size:16px; padding:13px; }
      .question{ font-size:22px; }
    }
  </style>
</head>

<body>

  <!-- Ø´Ø±ÙŠØ· Ø¹Ù„ÙˆÙŠ -->
  <div class="topbar">
    <div class="brand">
      <div class="logo">Ù„Øº</div>
      <div class="titlebox">
        <h1>Ù…Ù‡Ø§Ø±Ø§Øª Ù„ØºØªÙŠ Ø§Ù„Ù…Ù…ØªØ¹Ø©</h1>
        <p>Ø§Ø®ØªÙØ± Ù…Ù‡Ø§Ø±Ø© Ø«Ù… Ø§Ø¶ØºØ· â€œÙÙŠØ¯ÙŠÙˆâ€ Ø£Ùˆ â€œØ§Ø®ØªØ¨Ø§Ø± (5 Ø£Ø³Ø¦Ù„Ø©)â€</p>
      </div>
    </div>

    <div class="top-actions">
      <button class="btn btn-home" onclick="goHome()">â†©ï¸ Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
      <button class="btn btn-sound" id="soundBtn" onclick="toggleSound()">ğŸ”Š Ø§Ù„ØµÙˆØª: ØªØ´ØºÙŠÙ„</button>
    </div>
  </div>

  <!-- Ø´Ø±ÙŠØ· Ø¨Ø­Ø« -->
  <div class="toolbar">
    <div class="search">
      ğŸ”
      <input id="searchInput" type="text" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ù…Ù‡Ø§Ø±Ø© (Ù…Ø«Ø§Ù„: Ø§Ù„ØªÙ†ÙˆÙŠÙ†ØŒ Ø£Ø³Ù„ÙˆØ¨ Ø§Ù„ØªÙØ¶ÙŠÙ„...)" oninput="filterSkills()" />
    </div>
    <div class="hint">ğŸ’¡ ØªÙ„Ù…ÙŠØ­: Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„ØµÙˆØ±Ø© Ù„ØªÙƒØ¨ÙŠØ±Ù‡Ø§</div>
  </div>

  <!-- Ø´Ø¨ÙƒØ© Ø§Ù„Ù…Ù‡Ø§Ø±Ø§Øª -->
  <div class="skills" id="skillsGrid"></div>

  <footer>ØªØµÙ…ÙŠÙ… ÙˆØ¥Ø¹Ø¯Ø§Ø¯: ØµØ§Ù„Ø­Ø© Ø¹Ù„ÙŠ Ø§Ù„ØºØ§Ù…Ø¯ÙŠ Â© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©</footer>

  <!-- Ù†Ø§ÙØ°Ø© ØªÙƒØ¨ÙŠØ± Ø§Ù„ØµÙˆØ±Ø© -->
  <div class="modal" id="imgModal" onclick="closeImgModal(event)">
    <div class="modalCard" onclick="event.stopPropagation()">
      <div class="modalHead">
        <span id="imgModalTitle">Ø¹Ø±Ø¶ Ø§Ù„ØµÙˆØ±Ø©</span>
        <button class="close" onclick="closeImgModal()">Ø¥ØºÙ„Ø§Ù‚ âœ•</button>
      </div>
      <div class="modalImgWrap">
        <img id="imgModalSrc" src="" alt="ØµÙˆØ±Ø© Ù…ÙƒØ¨Ø±Ø©" />
      </div>
    </div>
  </div>

  <!-- Ù†Ø§ÙØ°Ø© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± -->
  <div class="modal quizModal" id="quizModal" onclick="closeQuizModal(event)">
    <div class="modalCard" onclick="event.stopPropagation()">
      <div class="modalHead">
        <span id="quizTitle">Ø§Ø®ØªØ¨Ø§Ø±</span>
        <button class="close" onclick="closeQuizModal()">Ø¥ØºÙ„Ø§Ù‚ âœ•</button>
      </div>

      <div class="quizBody">
        <div class="qTop">
          <div class="pill" id="qCount">Ø§Ù„Ø³Ø¤Ø§Ù„ 1 / 5</div>
          <div class="pill" id="qScore">Ø§Ù„Ù†ØªÙŠØ¬Ø©: 0</div>
        </div>

        <div class="question" id="qText">...</div>
        <div class="choices" id="qChoices"></div>

        <div class="qActions">
          <button class="btn2 secondary" onclick="restartQuiz()">Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±</button>
          <button class="btn2" id="nextBtn" onclick="nextQuestion()" disabled>Ø§Ù„ØªØ§Ù„ÙŠ</button>
        </div>

        <div class="result" id="resultBox"></div>
      </div>
    </div>
  </div>

<script>
/* =============================
   1) Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ù‡Ø§Ø±Ø§Øª + Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª
   ============================= */

/* Ù…Ù„Ø§Ø­Ø¸Ø©:
- img: Ø§Ø³Ù… Ø§Ù„ØµÙˆØ±Ø© ÙƒÙ…Ø§ Ù‡Ùˆ Ø¹Ù†Ø¯Ùƒ (ÙÙŠ Ù†ÙØ³ Ù…Ø¬Ù„Ø¯ skills.html)
- video: Ø±Ø§Ø¨Ø· Ø§Ù„ÙŠÙˆØªÙŠÙˆØ¨
- quiz: 5 Ø£Ø³Ø¦Ù„Ø© (ÙƒÙ„ Ø³Ø¤Ø§Ù„: Ù†Øµ + Ø®ÙŠØ§Ø±Ø§Øª + Ø±Ù‚Ù… Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø© index)
*/
const skillsData = [
  {
    key: "tanween",
    title: "Ø§Ù„ØªÙ†ÙˆÙŠÙ†",
    img: "skill_tanween.png",
    video: "https://youtu.be/U3D7_jGq5NA",
    quiz: [
      { q:"Ø¹Ù„Ø§Ù…Ø© Ø§Ù„ØªÙ†ÙˆÙŠÙ† ØªÙƒÙˆÙ†â€¦", choices:["Ø­Ø±ÙÙ‹Ø§ Ù…Ø³ØªÙ‚Ù„Ù‹Ø§", "Ù†ÙˆÙ†Ù‹Ø§ Ø³Ø§ÙƒÙ†Ø© ØªÙÙ†Ø·Ù‚ ÙˆÙ„Ø§ ØªÙÙƒØªØ¨", "Ø­Ø±ÙƒØ© ØªÙÙƒØªØ¨ ÙˆÙ„Ø§ ØªÙÙ†Ø·Ù‚", "Ù‡Ù…Ø²Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù„Ù"], correct:1 },
      { q:"Ù…Ù† Ø£Ù…Ø«Ù„Ø© Ø§Ù„ØªÙ†ÙˆÙŠÙ† Ø¨Ø§Ù„Ø¶Ù…:", choices:["ÙƒÙØªØ§Ø¨Ù", "ÙƒÙØªØ§Ø¨Ù‹Ø§", "ÙƒÙØªØ§Ø¨ÙŒ", "Ø§Ù„ÙƒÙØªØ§Ø¨"], correct:2 },
      { q:"Ø§Ù„ØªÙ†ÙˆÙŠÙ† Ø¨Ø§Ù„ÙØªØ­ ÙŠÙÙƒØªØ¨ ØºØ§Ù„Ø¨Ù‹Ø§â€¦", choices:["Ù…Ø±ØªÙŠÙ† ØªØ­Øª Ø§Ù„Ø­Ø±Ù", "Ù…Ø±ØªÙŠÙ† ÙÙˆÙ‚ Ø§Ù„Ø­Ø±Ù", "Ù…Ø¹ Ø£Ù„Ù Ø¨Ø¹Ø¯Ù‡ ÙÙŠ Ø¢Ø®Ø± Ø§Ù„Ø§Ø³Ù… (ØºØ§Ù„Ø¨Ù‹Ø§)", "Ù…Ø¹ Ø´Ø¯Ø©"], correct:2 },
      { q:"Ø§Ù„ØªÙ†ÙˆÙŠÙ† ÙŠÙƒÙˆÙ† ÙÙŠâ€¦", choices:["Ø§Ù„Ø£Ø³Ù…Ø§Ø¡ ÙÙ‚Ø·", "Ø§Ù„Ø£ÙØ¹Ø§Ù„ ÙÙ‚Ø·", "Ø§Ù„Ø­Ø±ÙˆÙ ÙÙ‚Ø·", "Ø§Ù„Ø£Ø³Ù…Ø§Ø¡ ÙˆØ§Ù„Ø£ÙØ¹Ø§Ù„"], correct:0 },
      { q:"Ø§Ù„ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ù†ÙˆÙ†Ø© Ù‡ÙŠ:", choices:["Ù‡Ø°Ø§", "Ø§Ù„ÙˆÙ„Ø¯Ù", "ÙˆÙ„Ø¯ÙŒ", "Ø§Ù„Ù…Ø¯Ø±Ø³Ø©"], correct:2 },
    ]
  },
  {
    key:"title",
    title:"Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…Ù†Ø§Ø³Ø¨",
    img:"skill_title.png",
    video:"https://youtu.be/KWRbbfoP20c",
    quiz:[
      { q:"Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…Ù†Ø§Ø³Ø¨ Ù„Ù„Ù†Øµ Ù‡Ùˆ Ø§Ù„Ø°ÙŠâ€¦", choices:["Ù„Ø§ Ø¹Ù„Ø§Ù‚Ø© Ù„Ù‡ Ø¨Ø§Ù„Ù†Øµ", "ÙŠØ¹Ø¨Ù‘Ø± Ø¹Ù† Ø§Ù„ÙÙƒØ±Ø© Ø§Ù„Ø¹Ø§Ù…Ø©", "ÙŠØµÙ Ø´Ø®ØµÙŠØ© ÙˆØ§Ø­Ø¯Ø© ÙÙ‚Ø· Ø¯Ø§Ø¦Ù…Ù‹Ø§", "ÙŠÙƒÙˆÙ† Ø·ÙˆÙŠÙ„Ù‹Ø§ Ø¬Ø¯Ù‹Ø§"], correct:1 },
      { q:"Ø£ÙØ¶Ù„ Ø·Ø±ÙŠÙ‚Ø© Ù„Ø§Ø®ØªÙŠØ§Ø± Ø¹Ù†ÙˆØ§Ù†:", choices:["Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ù†Øµ Ø³Ø±ÙŠØ¹Ù‹Ø§", "Ù…Ø¹Ø±ÙØ© Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø§Ù„ØµØ¹Ø¨Ø© ÙÙ‚Ø·", "ØªØ­Ø¯ÙŠØ¯ Ø§Ù„ÙÙƒØ±Ø© Ø§Ù„Ø¹Ø§Ù…Ø©", "Ù†Ø³Ø® Ø£ÙˆÙ„ Ø¬Ù…Ù„Ø©"], correct:2 },
      { q:"Ø¹Ù†ÙˆØ§Ù† Ù…Ù†Ø§Ø³Ø¨ Ù„Ù‚ØµØ© Ø¹Ù† ØµØ¯ÙŠÙ‚ ÙŠØ³Ø§Ø¹Ø¯ Ø²Ù…ÙŠÙ„Ù‡:", choices:["Ø±Ø­Ù„Ø© Ø¥Ù„Ù‰ Ø§Ù„Ø¨Ø­Ø±", "Ø§Ù„ØªØ¹Ø§ÙˆÙ† ÙˆØ§Ù„ØµØ¯Ø§Ù‚Ø©", "Ù„Ø¹Ø¨Ø© Ø¬Ø¯ÙŠØ¯Ø©", "Ø£ÙŠØ§Ù… Ø§Ù„Ø´ØªØ§Ø¡"], correct:1 },
      { q:"Ø¹Ù†ÙˆØ§Ù† ØºÙŠØ± Ù…Ù†Ø§Ø³Ø¨:", choices:["ÙŠØ­ÙƒÙŠ Ù…Ø¶Ù…ÙˆÙ† Ø§Ù„Ù†Øµ", "ÙŠØ¹ÙƒØ³ Ø§Ù„ÙÙƒØ±Ø© Ø§Ù„Ø±Ø¦ÙŠØ³Ø©", "Ø¨Ø¹ÙŠØ¯ Ø¹Ù† Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹", "Ù‚ØµÙŠØ± ÙˆÙˆØ§Ø¶Ø­"], correct:2 },
      { q:"Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø¬ÙŠØ¯ Ø¹Ø§Ø¯Ø© ÙŠÙƒÙˆÙ†â€¦", choices:["ØºØ§Ù…Ø¶Ù‹Ø§", "ÙˆØ§Ø¶Ø­Ù‹Ø§ ÙˆØ¬Ø°Ø§Ø¨Ù‹Ø§", "Ù…ÙƒØ±Ø±Ù‹Ø§ Ø¬Ø¯Ù‹Ø§", "ØºÙŠØ± Ù…ÙÙ‡ÙˆÙ…"], correct:1 },
    ]
  },
  {
    key:"wordTypes",
    title:"Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„ÙƒÙ„Ù…Ø©",
    img:"skill_word_types.png",
    video:"https://youtu.be/CvTvx1TRYw4",
    quiz:[
      { q:"ØªÙ†Ù‚Ø³Ù… Ø§Ù„ÙƒÙ„Ù…Ø© ÙÙŠ Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ø¥Ù„Ù‰:", choices:["Ø§Ø³Ù… ÙˆÙØ¹Ù„ ÙÙ‚Ø·", "Ø§Ø³Ù… ÙˆÙØ¹Ù„ ÙˆØ­Ø±Ù", "Ø­Ø±Ù ÙÙ‚Ø·", "Ø§Ø³Ù… ÙˆØ­Ø±Ù ÙÙ‚Ø·"], correct:1 },
      { q:"(Ø°Ù‡Ø¨) Ù†ÙˆØ¹Ù‡Ø§:", choices:["Ø§Ø³Ù…", "ÙØ¹Ù„", "Ø­Ø±Ù", "ØµÙØ©"], correct:1 },
      { q:"(ÙÙŠ) Ù†ÙˆØ¹Ù‡Ø§:", choices:["Ø§Ø³Ù…", "ÙØ¹Ù„", "Ø­Ø±Ù", "Ø¶Ù…ÙŠØ±"], correct:2 },
      { q:"(Ø§Ù„Ù…Ø¯Ø±Ø³Ø©) Ù†ÙˆØ¹Ù‡Ø§:", choices:["Ø§Ø³Ù…", "ÙØ¹Ù„", "Ø­Ø±Ù", "Ø£Ø¯Ø§Ø©"], correct:0 },
      { q:"Ø§Ù„Ø­Ø±Ù Ù‡Ùˆ:", choices:["Ù…Ø§ ÙŠØ¯Ù„ Ø¹Ù„Ù‰ Ù…Ø¹Ù†Ù‰ ÙÙŠ Ù†ÙØ³Ù‡", "Ù…Ø§ ÙŠØ¯Ù„ Ø¹Ù„Ù‰ Ù…Ø¹Ù†Ù‰ Ù…Ø¹ ØºÙŠØ±Ù‡", "Ù…Ø§ ÙŠÙ‚Ø¨Ù„ (Ø§Ù„)", "Ù…Ø§ ÙŠØ¯Ù„ Ø¹Ù„Ù‰ Ø²Ù…Ù†"], correct:1 },
    ]
  },
  {
    key:"verbTypes",
    title:"Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„ÙØ¹Ù„",
    img:"skill_verb-types.png",
    video:"https://youtu.be/-fNt_5kOvIs",
    quiz:[
      { q:"Ø§Ù„ÙØ¹Ù„ Ø§Ù„Ù…Ø§Ø¶ÙŠ ÙŠØ¯Ù„ Ø¹Ù„Ù‰â€¦", choices:["Ø§Ù„Ø­Ø§Ø¶Ø±", "Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„", "Ø§Ù„Ø­Ø¯Ø« ÙÙŠ Ø§Ù„Ø²Ù…Ù† Ø§Ù„Ù…Ø§Ø¶ÙŠ", "Ø§Ù„Ø§Ø³Ù…"], correct:2 },
      { q:"(ÙŠÙƒØªØ¨) ÙØ¹Ù„â€¦", choices:["Ù…Ø§Ø¶Ù", "Ù…Ø¶Ø§Ø±Ø¹", "Ø£Ù…Ø±", "Ø­Ø±Ù"], correct:1 },
      { q:"(Ø§ÙƒØªØ¨) ÙØ¹Ù„â€¦", choices:["Ù…Ø§Ø¶Ù", "Ù…Ø¶Ø§Ø±Ø¹", "Ø£Ù…Ø±", "Ø§Ø³Ù…"], correct:2 },
      { q:"Ø¹Ù„Ø§Ù…Ø© Ø§Ù„Ù…Ø¶Ø§Ø±Ø¹ ØºØ§Ù„Ø¨Ù‹Ø§ ÙŠØ¨Ø¯Ø£ Ø¨Ù€:", choices:["Ø£ØŒ Ù†ØŒ ÙŠØŒ Øª", "Ø³", "Ø§Ù„", "Ù„Ù†"], correct:0 },
      { q:"(Ø³Ø£Ø°Ù‡Ø¨) ÙŠØ¯Ù„ Ø¹Ù„Ù‰:", choices:["Ø§Ù„Ù…Ø§Ø¶ÙŠ", "Ø§Ù„Ø­Ø§Ø¶Ø±", "Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„", "Ø§Ù„Ø§Ø³Ù…"], correct:2 },
    ]
  },
  {
    key:"tafdeel",
    title:"Ø£Ø³Ù„ÙˆØ¨ Ø§Ù„ØªÙØ¶ÙŠÙ„",
    img:"skill_tafdeel.png",
    video:"https://youtu.be/pl5BGnN-Cdc",
    quiz:[
      { q:"ØµÙŠØºØ© Ø§Ù„ØªÙØ¶ÙŠÙ„ ØªÙƒÙˆÙ† ØºØ§Ù„Ø¨Ù‹Ø§ Ø¹Ù„Ù‰ ÙˆØ²Ù†:", choices:["ÙÙØ¹Ù‘ÙØ§Ù„", "Ø£ÙØ¹Ù„", "Ù…ÙØ¹ÙˆÙ„", "ÙØ¹ÙŠÙ„"], correct:1 },
      { q:"(Ø£ÙƒØ¨Ø±) Ù…Ø«Ø§Ù„ Ø¹Ù„Ù‰:", choices:["Ø§Ø³Ù… Ù…ÙƒØ§Ù†", "Ø§Ø³Ù… ØªÙØ¶ÙŠÙ„", "ÙØ¹Ù„ Ù…Ø¶Ø§Ø±Ø¹", "Ø­Ø±Ù"], correct:1 },
      { q:"Ø¬Ù…Ù„Ø© ÙÙŠÙ‡Ø§ ØªÙØ¶ÙŠÙ„:", choices:["Ø§Ù„Ø¬Ùˆ Ø¬Ù…ÙŠÙ„", "Ø§Ù„Ø·Ø§Ù„Ø¨ Ø£Ø°ÙƒÙ‰ Ù…Ù† Ø²Ù…ÙŠÙ„Ù‡", "Ø°Ù‡Ø¨ Ù…Ø­Ù…Ø¯", "ÙÙŠ Ø§Ù„Ù…Ø¯Ø±Ø³Ø©"], correct:1 },
      { q:"Ø§Ø³Ù… Ø§Ù„ØªÙØ¶ÙŠÙ„ ÙŠÙØ³ØªØ®Ø¯Ù… Ù„Ù„Ù…Ù‚Ø§Ø±Ù†Ø© Ø¨ÙŠÙ†â€¦", choices:["Ø´ÙŠØ¦ÙŠÙ† Ø£Ùˆ Ø£ÙƒØ«Ø±", "Ø­Ø±ÙÙŠÙ†", "ÙØ¹Ù„ÙŠÙ† ÙÙ‚Ø·", "Ø¬Ù…Ù„ØªÙŠÙ† ÙÙ‚Ø·"], correct:0 },
      { q:"(Ø£ÙØ¶Ù„) Ù…Ø¹Ù†Ø§Ù‡Ø§:", choices:["Ø§Ù„Ø£Ù‚Ù„", "Ø§Ù„Ø£Ø­Ø³Ù†", "Ø§Ù„Ù…Ø§Ø¶ÙŠ", "Ø§Ù„Ø¶Ø¹ÙŠÙ"], correct:1 },
    ]
  },
  {
    key:"syn",
    title:"Ø§Ù„Ù…Ø±Ø§Ø¯ÙØ§Øª",
    img:"skill_synonyms.png",
    video:"https://youtu.be/Ue9sNE6oF98",
    quiz:[
      { q:"Ø§Ù„Ù…Ø±Ø§Ø¯Ù Ù‡Ùˆ:", choices:["ÙƒÙ„Ù…Ø© Ø¹ÙƒØ³ Ø§Ù„Ù…Ø¹Ù†Ù‰", "ÙƒÙ„Ù…Ø© Ù‚Ø±ÙŠØ¨Ø© ÙÙŠ Ø§Ù„Ù…Ø¹Ù†Ù‰", "ÙƒÙ„Ù…Ø© Ø¨Ù„Ø§ Ù…Ø¹Ù†Ù‰", "Ø¬Ù…Ù„Ø© Ø·ÙˆÙŠÙ„Ø©"], correct:1 },
      { q:"Ù…Ø±Ø§Ø¯Ù (Ø³Ø¹ÙŠØ¯):", choices:["Ø­Ø²ÙŠÙ†", "ÙØ±ÙØ­", "ØºØ§Ø¶Ø¨", "Ù…ØªØ¹Ø¨"], correct:1 },
      { q:"Ù…Ø±Ø§Ø¯Ù (Ø³Ø±ÙŠØ¹):", choices:["Ø¨Ø·ÙŠØ¡", "Ø¹Ø§Ø¬Ù„", "Ù‚Ù„ÙŠÙ„", "Ø«Ù‚ÙŠÙ„"], correct:1 },
      { q:"Ù†Ø³ØªØ®Ø¯Ù… Ø§Ù„Ù…Ø±Ø§Ø¯ÙØ§Øª Ù…Ù† Ø£Ø¬Ù„:", choices:["Ø¥Ø¶Ø¹Ø§Ù Ø§Ù„Ù†Øµ", "ØªÙ†ÙˆÙŠØ¹ Ø§Ù„Ø£Ø³Ù„ÙˆØ¨", "Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ø£Ø®Ø·Ø§Ø¡", "ØªÙƒØ±Ø§Ø± Ù†ÙØ³ Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø¯Ø§Ø¦Ù…Ù‹Ø§"], correct:1 },
      { q:"Ù…Ø±Ø§Ø¯Ù (ÙƒØ¨ÙŠØ±):", choices:["Ø¶Ø®Ù…", "ØµØºÙŠØ±", "Ø®ÙÙŠÙ", "Ø¶Ø¹ÙŠÙ"], correct:0 },
    ]
  },
  {
    key:"ant",
    title:"Ø§Ù„Ø£Ø¶Ø¯Ø§Ø¯",
    img:"skill_antonyms.png",
    video:"https://youtu.be/kqTJtHz8U-Y",
    quiz:[
      { q:"Ø§Ù„Ø¶Ø¯ Ù‡Ùˆ:", choices:["ÙƒÙ„Ù…Ø© Ù†ÙØ³ Ø§Ù„Ù…Ø¹Ù†Ù‰", "ÙƒÙ„Ù…Ø© Ø¹ÙƒØ³ Ø§Ù„Ù…Ø¹Ù†Ù‰", "Ø¬Ù…Ù„Ø© Ù…ÙÙŠØ¯Ø©", "Ø­Ø±Ù"], correct:1 },
      { q:"Ø¶Ø¯ (Ø­Ø§Ø±):", choices:["Ø¯Ø§ÙØ¦", "Ø¨Ø§Ø±Ø¯", "Ø¬Ù…ÙŠÙ„", "Ù‚Ø±ÙŠØ¨"], correct:1 },
      { q:"Ø¶Ø¯ (Ù†Ø¬Ø­):", choices:["ØªÙÙˆÙ‚", "Ø±Ø³Ø¨", "Ø³Ø±Ù‘", "Ù‚Ø±Ø£"], correct:1 },
      { q:"Ø¶Ø¯ (Ø·ÙˆÙŠÙ„):", choices:["Ù‚ØµÙŠØ±", "ÙƒØ¨ÙŠØ±", "Ø³Ø±ÙŠØ¹", "Ø³Ù‡Ù„"], correct:0 },
      { q:"Ø¶Ø¯ (Ù†Ø´Ø§Ø·):", choices:["ØªØ¹Ø¨", "ÙØ±Ø­", "Ù†ÙˆØ±", "Ø°ÙƒØ§Ø¡"], correct:0 },
    ]
  },
  {
    key:"mainIdea",
    title:"Ø§Ù„ÙÙƒØ±Ø© Ø§Ù„Ø±Ø¦ÙŠØ³Ø©",
    img:"skill_main_idea.png",
    video:"https://youtu.be/jhuaaQjiZIs",
    quiz:[
      { q:"Ø§Ù„ÙÙƒØ±Ø© Ø§Ù„Ø±Ø¦ÙŠØ³Ø© Ù‡ÙŠ:", choices:["ØªÙØµÙŠÙ„ ØµØºÙŠØ±", "Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù†Øµ", "Ø£Ù‡Ù… ÙÙƒØ±Ø© ÙŠØ¯ÙˆØ± Ø­ÙˆÙ„Ù‡Ø§ Ø§Ù„Ù†Øµ", "ÙƒÙ„Ù…Ø© ØµØ¹Ø¨Ø©"], correct:2 },
      { q:"Ù„Ø¥ÙŠØ¬Ø§Ø¯ Ø§Ù„ÙÙƒØ±Ø© Ø§Ù„Ø±Ø¦ÙŠØ³Ø©:", choices:["Ù†Ù‚Ø±Ø£ Ø§Ù„Ø¹Ù†ÙˆØ§Ù† ÙˆÙ†Ø­Ø¯Ø¯ Ù…ÙˆØ¶ÙˆØ¹ Ø§Ù„Ù†Øµ", "Ù†Ø­ÙØ¸ Ø§Ù„Ù†Øµ", "Ù†Ø¨Ø­Ø« Ø¹Ù† Ø£Ø·ÙˆÙ„ ÙƒÙ„Ù…Ø©", "Ù†Ù‚Ø±Ø£ Ø¢Ø®Ø± ÙƒÙ„Ù…Ø© ÙÙ‚Ø·"], correct:0 },
      { q:"Ø§Ù„ÙÙƒØ±Ø© Ø§Ù„Ø±Ø¦ÙŠØ³Ø© ØºØ§Ù„Ø¨Ù‹Ø§ ØªÙƒÙˆÙ†â€¦", choices:["ÙÙŠ ÙƒÙ„ Ø³Ø·Ø± Ù…Ø®ØªÙ„ÙØ©", "Ù…Ø±ØªØ¨Ø·Ø© Ø¨ÙƒÙ„ Ø§Ù„Ù†Øµ", "Ù„Ø§ Ø¹Ù„Ø§Ù‚Ø© Ù„Ù‡Ø§ Ø¨Ø§Ù„Ù†Øµ", "ÙÙŠ Ø§Ù„Ø£Ø³Ù…Ø§Ø¡ ÙÙ‚Ø·"], correct:1 },
      { q:"Ø§Ù„ØªÙØ§ØµÙŠÙ„ ÙÙŠ Ø§Ù„Ù†Øµ Ù‡Ø¯ÙÙ‡Ø§:", choices:["Ø´Ø±Ø­ Ø§Ù„ÙÙƒØ±Ø© Ø§Ù„Ø±Ø¦ÙŠØ³Ø©", "Ø¥Ø®ÙØ§Ø¡ Ø§Ù„ÙÙƒØ±Ø©", "Ø¥Ø±Ø¨Ø§Ùƒ Ø§Ù„Ù‚Ø§Ø±Ø¦", "Ø­Ø°Ù Ø§Ù„Ø¹Ù†ÙˆØ§Ù†"], correct:0 },
      { q:"Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ù†Øµ Ø¹Ù† ÙÙˆØ§Ø¦Ø¯ Ø§Ù„Ù‚Ø±Ø§Ø¡Ø© ÙØ§Ù„ÙÙƒØ±Ø© Ø§Ù„Ø±Ø¦ÙŠØ³Ø©:", choices:["Ø§Ù„Ù‚Ø±Ø§Ø¡Ø© Ù…ÙÙŠØ¯Ø©", "Ø§Ù„ÙƒØªØ§Ø¨ Ø«Ù‚ÙŠÙ„", "Ø§Ù„Ù…Ø¹Ù„Ù… ÙŠØ´Ø±Ø­", "Ø§Ù„Ø¯ÙØªØ± Ø¬Ù…ÙŠÙ„"], correct:0 },
    ]
  },
];

/* =============================
   2) Ø¨Ù†Ø§Ø¡ Ø§Ù„ØµÙØ­Ø© (Ø¨Ø·Ø§Ù‚Ø§Øª)
   ============================= */
const grid = document.getElementById("skillsGrid");

function renderSkills(list){
  grid.innerHTML = "";
  list.forEach(skill => {
    const card = document.createElement("div");
    card.className = "card";
    card.dataset.title = skill.title;

    card.innerHTML = `
      <div class="imgwrap" title="Ø§Ø¶ØºØ· Ù„ØªÙƒØ¨ÙŠØ± Ø§Ù„ØµÙˆØ±Ø©">
        <div class="zoomBadge">ğŸ” ØªÙƒØ¨ÙŠØ±</div>
        <img src="${skill.img}" alt="Ø´Ø±Ø­ ${skill.title}" />
      </div>
      <div class="cardbody">
        <h3>${skill.title}</h3>
        <p class="sub">Ø§Ù„ØµÙˆØ±Ø© ØªÙˆØ¶Ø­ Ø§Ù„Ù…Ù‡Ø§Ø±Ø© Ø¨Ø´ÙƒÙ„ Ø¨ØµØ±ÙŠ â€” Ø«Ù… Ø§Ø®ØªØ± ÙÙŠØ¯ÙŠÙˆ Ø£Ùˆ Ø§Ø®ØªØ¨Ø§Ø±.</p>
        <div class="actions">
          <button class="video">ğŸ¬ ÙÙŠØ¯ÙŠÙˆ Ø§Ù„Ø´Ø±Ø­</button>
          <button class="quiz">ğŸ“ Ø§Ø®ØªØ¨Ø§Ø± (5 Ø£Ø³Ø¦Ù„Ø©)</button>
        </div>
      </div>
    `;

    // ØªÙƒØ¨ÙŠØ± Ø§Ù„ØµÙˆØ±Ø©
    card.querySelector(".imgwrap").addEventListener("click", () => {
      openImgModal(skill.title, skill.img);
    });

    // ÙØªØ­ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ
    card.querySelector(".video").addEventListener("click", () => {
      openVideo(skill.video);
    });

    // ÙØªØ­ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±
    card.querySelector(".quiz").addEventListener("click", () => {
      openQuiz(skill);
    });

    grid.appendChild(card);
  });
}
renderSkills(skillsData);

/* Ø¨Ø­Ø« */
function filterSkills(){
  const q = (document.getElementById("searchInput").value || "").trim();
  if(!q){ renderSkills(skillsData); return; }
  const filtered = skillsData.filter(s => s.title.includes(q));
  renderSkills(filtered);
}

/* Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ© */
function goHome(){
  // Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© index.html ÙÙŠ Ù†ÙØ³ Ø§Ù„Ù…Ø¬Ù„Ø¯:
  window.location.href = "index.html";
}

/* ÙØªØ­ ÙÙŠØ¯ÙŠÙˆ */
function openVideo(url){
  // ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙˆØª Ù„Ø£ÙˆÙ„ Ù…Ø±Ø© (Ù…Ø·Ù„ÙˆØ¨ ÙÙŠ Ø¨Ø¹Ø¶ Ø§Ù„Ù…ØªØµÙØ­Ø§Øª)
  ensureAudioUnlocked();
  window.open(url, "_blank");
}

/* =============================
   3) ØªÙƒØ¨ÙŠØ± Ø§Ù„ØµÙˆØ±Ø© (Modal)
   ============================= */
const imgModal = document.getElementById("imgModal");
const imgModalTitle = document.getElementById("imgModalTitle");
const imgModalSrc = document.getElementById("imgModalSrc");

function openImgModal(title, src){
  ensureAudioUnlocked();
  imgModalTitle.textContent = `Ø¹Ø±Ø¶ Ø´Ø±Ø­: ${title}`;
  imgModalSrc.src = src;
  imgModal.classList.add("open");
  // ØµÙˆØª Ù„Ø·ÙŠÙ
  playDing();
}

function closeImgModal(e){
  if(e && e.target && e.target.closest(".modalCard")) return;
  imgModal.classList.remove("open");
}

/* =============================
   4) Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø§Ù„ÙØ¹Ù„ÙŠØ© (5 Ø£Ø³Ø¦Ù„Ø©)
   ============================= */
const quizModal = document.getElementById("quizModal");
const quizTitle = document.getElementById("quizTitle");
const qCount = document.getElementById("qCount");
const qScore = document.getElementById("qScore");
const qText = document.getElementById("qText");
const qChoices = document.getElementById("qChoices");
const nextBtn = document.getElementById("nextBtn");
const resultBox = document.getElementById("resultBox");

let currentSkill = null;
let currentIndex = 0;
let score = 0;
let locked = false;

function openQuiz(skill){
  ensureAudioUnlocked();
  currentSkill = skill;
  currentIndex = 0;
  score = 0;
  locked = false;
  resultBox.style.display = "none";
  quizTitle.textContent = `Ø§Ø®ØªØ¨Ø§Ø±: ${skill.title}`;
  quizModal.classList.add("open");
  renderQuestion();
  playDing();
}

function closeQuizModal(e){
  if(e && e.target && e.target.closest(".modalCard")) return;
  quizModal.classList.remove("open");
}

function renderQuestion(){
  locked = false;
  nextBtn.disabled = true;

  const total = currentSkill.quiz.length;
  const item = currentSkill.quiz[currentIndex];

  qCount.textContent = `Ø§Ù„Ø³Ø¤Ø§Ù„ ${currentIndex + 1} / ${total}`;
  qScore.textContent = `Ø§Ù„Ù†ØªÙŠØ¬Ø©: ${score}`;
  qText.textContent = item.q;

  qChoices.innerHTML = "";
  item.choices.forEach((ch, idx) => {
    const btn = document.createElement("div");
    btn.className = "choice";
    btn.textContent = ch;
    btn.addEventListener("click", () => chooseAnswer(idx));
    qChoices.appendChild(btn);
  });
}

function chooseAnswer(idx){
  if(locked) return;
  locked = true;
  const item = currentSkill.quiz[currentIndex];
  const choicesEls = [...qChoices.querySelectorAll(".choice")];

  if(idx === item.correct){
    choicesEls[idx].classList.add("correct");
    score++;
    qScore.textContent = `Ø§Ù„Ù†ØªÙŠØ¬Ø©: ${score}`;
    playCorrect();
    showCheer("Ù…Ù…ØªØ§Ø²! ğŸ‘ Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø©");
  }else{
    choicesEls[idx].classList.add("wrong");
    choicesEls[item.correct].classList.add("correct");
    playWrong();
    showCheer("Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ ğŸŒŸ Ø§Ù„ØµØ­ÙŠØ­ Ù…ÙØ­Ø¯Ø¯ Ø¨Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ø£Ø®Ø¶Ø±");
  }

  nextBtn.disabled = false;

  // Ø¥Ø°Ø§ ÙƒØ§Ù† Ø¢Ø®Ø± Ø³Ø¤Ø§Ù„ â†’ Ø²Ø± Ø¥Ù†Ù‡Ø§Ø¡
  if(currentIndex === currentSkill.quiz.length - 1){
    nextBtn.textContent = "Ø¥Ù†Ù‡Ø§Ø¡";
  }else{
    nextBtn.textContent = "Ø§Ù„ØªØ§Ù„ÙŠ";
  }
}

function nextQuestion(){
  if(currentIndex === currentSkill.quiz.length - 1){
    finishQuiz();
    return;
  }
  currentIndex++;
  renderQuestion();
}

function finishQuiz(){
  // ØªÙ‡Ù†Ø¦Ø© Ù†Ù‡Ø§Ø¦ÙŠØ©
  const total = currentSkill.quiz.length;
  resultBox.style.display = "block";

  const percent = Math.round((score/total)*100);
  let msg = `Ù†ØªÙŠØ¬ØªÙƒ: ${score} Ù…Ù† ${total} (${percent}%)`;

  if(percent === 100){
    msg += " ğŸ‰ Ø±Ø§Ø¦Ø¹ Ø¬Ø¯Ù‹Ø§! Ø£Ù†Øª Ø¨Ø·Ù„!";
    playWin();
  }else if(percent >= 60){
    msg += " âœ… Ù…Ù…ØªØ§Ø²! Ø£ÙƒÙ…Ù„ Ø§Ù„ØªÙ‚Ø¯Ù….";
    playDing();
  }else{
    msg += " ğŸŒ± Ø¨Ø¯Ø§ÙŠØ© Ø¬Ù…ÙŠÙ„Ø©! Ø£Ø¹Ø¯ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù„ØªØ­Ø³Ù† Ù†ØªÙŠØ¬ØªÙƒ.";
    playDing();
  }

  resultBox.textContent = msg;
  nextBtn.disabled = true;
}

function restartQuiz(){
  if(!currentSkill) return;
  currentIndex = 0;
  score = 0;
  resultBox.style.display = "none";
  nextBtn.textContent = "Ø§Ù„ØªØ§Ù„ÙŠ";
  renderQuestion();
  playDing();
}

function showCheer(text){
  // Ø±Ø³Ø§Ù„Ø© ØªØ´Ø¬ÙŠØ¹ Ø®ÙÙŠÙØ© ØªØ¸Ù‡Ø± Ø¯Ø§Ø®Ù„ ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ù†ØªÙŠØ¬Ø© Ù…Ø¤Ù‚ØªÙ‹Ø§
  resultBox.style.display = "block";
  resultBox.textContent = text;
  setTimeout(() => {
    // Ù„Ø§ Ù†Ø®ÙÙŠÙ‡Ø§ Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù†ØªÙ‡Ù‰
    if(nextBtn.disabled) return;
    resultBox.style.display = "none";
  }, 1100);
}

/* =============================
   5) Ø§Ù„Ø£ØµÙˆØ§Øª (Ø¨Ø¯ÙˆÙ† Ù…Ù„ÙØ§Øª ØµÙˆØªÙŠØ©)
   - Ù†Ø³ØªØ®Ø¯Ù… WebAudio Ù„ØªØ¬Ù†Ø¨ Ø±ÙØ¹ Ù…Ù„ÙØ§Øª
   - Ù…Ù„Ø§Ø­Ø¸Ø©: ÙŠØ¬Ø¨ Ø£ÙˆÙ„ ØªÙØ§Ø¹Ù„ Ù…Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù„ÙØªØ­ Ø§Ù„ØµÙˆØª (Ù…Ø·Ø¨Ù‚ Ù‡Ù†Ø§)
   ============================= */
let soundEnabled = true;
let audioCtx = null;

function ensureAudioUnlocked(){
  if(!soundEnabled) return;
  if(!audioCtx){
    const AudioContext = window.AudioContext || window.webkitAudioContext;
    audioCtx = new AudioContext();
  }
  if(audioCtx && audioCtx.state === "suspended"){
    audioCtx.resume();
  }
}

function tone(freq=440, duration=0.12, type="sine", gain=0.08){
  if(!soundEnabled) return;
  ensureAudioUnlocked();
  if(!audioCtx) return;

  const o = audioCtx.createOscillator();
  const g = audioCtx.createGain();
  o.type = type;
  o.frequency.value = freq;
  g.gain.value = gain;

  o.connect(g);
  g.connect(audioCtx.destination);
  o.start();
  o.stop(audioCtx.currentTime + duration);
}

function playDing(){
  // Ø±Ù†ÙŠÙ† Ù„Ø·ÙŠÙ
  tone(880, 0.09, "sine", 0.08);
  setTimeout(()=>tone(1175, 0.10, "sine", 0.07), 95);
}

function playCorrect(){
  // Ù†ØºÙ…Ø© Ù†Ø¬Ø§Ø­
  tone(784, 0.08, "triangle", 0.09);
  setTimeout(()=>tone(988, 0.10, "triangle", 0.09), 90);
  setTimeout(()=>tone(1319, 0.12, "triangle", 0.08), 190);
}

function playWrong(){
  // Ù†ØºÙ…Ø© Ø®Ø·Ø£
  tone(220, 0.14, "sawtooth", 0.06);
  setTimeout(()=>tone(196, 0.14, "sawtooth", 0.06), 120);
}

function playWin(){
  // ØªÙ‡Ù†Ø¦Ø© Ù‚ØµÙŠØ±Ø©
  playCorrect();
  setTimeout(()=>tone(1568, 0.10, "triangle", 0.08), 350);
  setTimeout(()=>tone(1760, 0.12, "triangle", 0.08), 470);
}

function toggleSound(){
  soundEnabled = !soundEnabled;
  const btn = document.getElementById("soundBtn");
  btn.textContent = soundEnabled ? "ğŸ”Š Ø§Ù„ØµÙˆØª: ØªØ´ØºÙŠÙ„" : "ğŸ”‡ Ø§Ù„ØµÙˆØª: Ø¥ÙŠÙ‚Ø§Ù";
  if(soundEnabled) playDing();
}

/* Ø¥ØºÙ„Ø§Ù‚ Ø¨Ø§Ù„Ù†Ù‚Ø± Ø®Ø§Ø±Ø¬ Ø§Ù„Ù†Ø§ÙØ°Ø© */
document.addEventListener("keydown", (e) => {
  if(e.key === "Escape"){
    imgModal.classList.remove("open");
    quizModal.classList.remove("open");
  }
});
</script>

</body>
</html>
